<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfAppIContract"
        xmlns:av="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="av" x:Class="WpfAppIContract.MainWindow"
        Title="Текстовый конвейер - Контракты" Height="535" Width="900">

    <Window.Resources>
        <local:BoolToColorConverter x:Key="BoolToColorConverter"/>

        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="#F5F5F5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="270"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Список операций -->
        <ListBox Grid.Column="0" 
                 Margin="10"
                 ItemsSource="{Binding Operations}"
                 SelectedItem="{Binding SelectedOperation}"
                 DisplayMemberPath="Name"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 FontSize="14"
                 Background="#FAFAFA" av:ItemsSource="{av:SampleData ItemCount=5}"/>

        <!-- Карточка операции -->
        <Border Grid.Column="1"
                Margin="10"
                Padding="25"
                Background="#FFF"
                CornerRadius="8"
                BorderBrush="#DDD"
                BorderThickness="1"
                DataContext="{Binding SelectedOperation}">

            <StackPanel>
                <TextBlock Text="{Binding Name}"
                           FontWeight="Bold" FontSize="18"
                           Margin="0,0,0,15" 
                           Foreground="#333"/>

                <!-- Входной текст -->
                <TextBlock Text="Входной текст:"
                           FontWeight="SemiBold" FontSize="14"
                           Margin="0,0,0,5" />

                <TextBox Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                         Height="80" 
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,15"
                         FontSize="14"
                         Padding="10"/>

                <!-- Кнопка выполнения -->
                <Button Content="Выполнить"
                        Command="{Binding ExecuteCommand}"
                        Width="140" Height="35"
                        Margin="0,0,0,20"
                        FontSize="14"
                        Background="#007ACC"
                        Foreground="White"
                        BorderThickness="0"/>

                <!-- Результат -->
                <TextBlock Text="Результат:"
                           FontWeight="SemiBold" FontSize="14"
                           Margin="0,0,0,5" />

                <TextBox Text="{Binding OutputText, Mode=OneWay}"
                         Height="80"
                         TextWrapping="Wrap"
                         IsReadOnly="True"
                         Background="#F8F8F8"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,20"
                         FontSize="14"
                         Padding="10"
                         Foreground="#333"/>

                <!-- Индикаторы Pre/Post -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,25">
                    <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                        <Ellipse Width="24" Height="24"
                                 Fill="{Binding PreConditionSatisfied, Converter={StaticResource BoolToColorConverter}}"
                                 Stroke="#CCC" StrokeThickness="1"/>
                        <TextBlock Text="Предусловие" 
                                   Margin="8,0,0,0" 
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   FontWeight="SemiBold"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="24" Height="24"
                                 Fill="{Binding PostConditionSatisfied, Converter={StaticResource BoolToColorConverter}}"
                                 Stroke="#CCC" StrokeThickness="1"/>
                        <TextBlock Text="Постусловие" 
                                   Margin="8,0,0,0" 
                                   VerticalAlignment="Center"
                                   FontSize="14"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </StackPanel>

                <!-- Кнопка контракта -->
                <Button Content="Показать контракт"
                        Command="{Binding ShowContractCommand}"
                        Width="200" Height="35"
                        FontSize="14"
                        Background="#28A745"
                        Foreground="White"
                        BorderThickness="0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>